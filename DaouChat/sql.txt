-chatgroup-

create table chatgroup(
groupid varchar(80),
userid varchar(20),
groupname varchar(45),
primary key (groupid)
)ENGINE=InnoDB DEFAULT CHARSET=utf8;

insert into chatgroup(userid,groupname) values('1','1');


-chatcontent-

create table chatcontent(
userid varchar(20),
groupid varchar(45),
content varchar(1000),
attach MEDIUMBLOB,
sendtime date
)

-user-
create table user(
userid varchar(20),
password varchar(45),
primary key(userid)
)ENGINE=InnoDB DEFAULT CHARSET=utf8;

-friend-
create table friend(
userid varchar(20),
friendid varchar(20)
)ENGINE=InnoDB DEFAULT CHARSET=utf8;

-chatmember-
create table chatmember(
groupid varchar(80),
userid varchar(20)
)ENGINE=InnoDB DEFAULT CHARSET=utf8;

--존재하는그룹인지 확인--
select b.groupid from 
(select groupid, count(*) ccnt from chatmember where groupid in (select a.groupid from (select groupid, count(groupid) cnt from chatmember where userid in ('q','asdf') group by groupid having cnt =2) a) group by groupid) b
where b.ccnt = 2;


--채팅그룹이있으면 groupid 가져오는 쿼리문--
select b.groupid from 
	(select groupid, count(*) ccnt from chatmember where groupid in (select a.groupid from (select groupid, count(groupid) cnt from chatmember where userid in ('ㅁ','q') group by groupid having cnt =2) a) group by groupid) b 

